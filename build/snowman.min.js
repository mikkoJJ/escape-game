!function(){var e,t,a,n,i,s,o,r,d,l,h,c,u,p=300,g=30,w=3e3,f=160,y=140,E=1e3,m=90,x=1e4,A=7,P=43,k=-15,v=0,N=!0,b=!1,C=!0,O={preload:function(){e.load.atlas("sprites",ASSETS_FOLDER+"/walkingsprites.png","assets/walkingsprites_data.json"),e.load.audio("walking",ASSETS_FOLDER+"/oskari_walking.ogg")},create:function(){e.stage.backgroundColor=2906546,a=e.add.sprite(200,300,"sprites","snowman"),a.anchor.setTo(0,.5),e.add.tween(a).to({x:a.x+20},300,Phaser.Easing.Linear.None,!0,0,-1,!0),u=e.add.tween(a).to({y:a.y+30},1200,Phaser.Easing.Linear.None,!0,0,-1,!0),n=e.add.group(),n.createMultiple(10,"sprites","star",!1),i=e.add.group(),i.createMultiple(20,"sprites","flake",!1),s=e.add.group();for(var r=0;A>r;r++){var d=s.create(0,350,"sprites","rainbow");d.x=r*P}t=e.add.audio("walking"),o=e.add.emitter(0,0,100),o.makeParticles("sprites","ding"),o.gravity=100,o.setAlpha(1,0,2e3),e.world.bringToTop(a),e.physics.enable(a,Phaser.Physics.ARCADE),this.setupTexts(),e.input.onDown.add(this.mouseDown,this),e.input.onUp.add(this.mouseUp,this),e.time.events.loop(g,this.makeRainbow,this),e.time.events.loop(p,this.makeStars,this)},setupTexts:function(){var t={font:"40px VT323",fill:"white",align:"left"},a={font:"60px VT323",fill:"white",align:"center"},n={font:"25px VT323",fill:"blue",align:"center"};r=e.add.text(e.world.centerX,60,"WALKING IN THE AIR\n THE GAME",a),r.anchor.set(.5),d=e.add.text(e.world.centerX,180,"HOLD AND RELEASE MOUSE/FINGER TO PLAY",n),d.anchor.set(.5),l=e.add.text(20,e.world.height-70,"PROGRAMMING & GRAPHICS: MIKKO JAKONEN\nMUSIC: OSKARI JAKONEN",t),h=e.add.text(e.world.centerX,e.world.centerY+180,"MUSIC: ON    ",n),h.anchor.set(.5),h.inputEnabled=!0,c=new Phaser.Rectangle(h.x-20,h.y-20,h.width+20,h.height+20)},startGame:function(){b=!0,u.stop(),N&&t.play("",0,1,!0),e.time.events.loop(w,this.makeCoins,this),e.add.tween(r).to({y:-80},800,Phaser.Easing.Cubic.Out,!0),e.add.tween(l).to({y:e.world.height+80},800,Phaser.Easing.Cubic.Out,!0),e.add.tween(d).to({alpha:0},2e3,Phaser.Easing.Cubic.Out,!0),e.add.tween(h).to({alpha:0},800,Phaser.Easing.Linear.None,!0)},update:function(){b&&(a.body.velocity.y=-f,C&&(a.body.velocity.y=y),i.forEachAlive(function(e){e.x<-10&&e.kill()},this),e.physics.arcade.collide(a,i,this.collisionHandler,null,this))},makeRainbow:function(){for(var e=0;A-1>e;e++)s.getAt(e).y=s.getAt(e+1).y;s.getAt(A-1).y=a.y+k},makeStars:function(){var t=n.getFirstExists(!1);t.rotation=0,t.anchor.set(.5);var a=750,i=e.world.randomY;t.reset(a,i),e.add.tween(t).to({x:-50,rotation:-1},E,Phaser.Easing.Linear.None,!0).onComplete.add(function(){t.kill()})},makeCoins:function(){var t=i.getFirstExists(!1);t.rotation=0;var a=750,n=e.world.randomY;t.reset(a,n),e.add.tween(t).to({rotation:4*-Math.PI},x,Phaser.Easing.Linear.None,!0),e.physics.enable(t,Phaser.Physics.ARCADE),t.body.velocity.x=-m},collisionHandler:function(e,t){o.x=t.x,o.y=t.y,o.start(!0,800,null,20),v++,t.kill()},mouseDown:function(e){if(!b){if(c.contains(e.x,e.y))return void(N?(h.text="MUSIC: OFF :(",N=!1):(h.text="MUSIC: ON    ",N=!0));this.startGame()}C=!1},mouseUp:function(){C=!0}};e=new Phaser.Game(700,700,Phaser.CANVAS,"snowman-game",O)}();